@using GameDeckWebApplication.Models


@model JeuVM

@{ string title = $"{Model?.Nom}";
    ViewBag.Title = $"Détail " + title; }

<div class="mx-auto mt-5 w-75 align-self-center align-items-center justify-content-center">
    <div class="justify-content-center text-center">
        <h1>@title</h1>
        <p>Sortie le <b class="text-primary" >@Model.DateSortie.ToString("dd/MM/yyyy")</b></p>
    </div>
    <div class="d-flex flex-row justify-content-center text-start gap-2">
        <div class="d-flex flex-column align-items-stretch gap-2">
            <p class="m-0">Editeur</p>
            <p class="m-0">Catégorie</p>
        </div>
        <div class="d-flex flex-column align-items-stretch text-primary gap-2">
            <b class="m-0">@Model.EditeurObj.Nom</b>
            <b class="m-0">@Model.GenreObj.Nom</b>
        </div>
    </div>
    <div class="mt-2">
        <p class="my-0 mx-2">Description</p>
        <div class="border border-primary rounded-2 p-2 bg-primary bg-opacity-25">
            <p>@Model.Description</p>
        </div>
    </div>
    @if (Model.Experiences != null)
    {
        <div class="d-flex flex-row mx-2 mt-2 pb-2 border-bottom border-primary gap-2">
            <p class="m-0">Temps de jeu moyen</p>
            <b class="m-0 ms-auto text-primary flex-nowrap">@Model.Experiences.Select(e => (e.TempsJeu.TotalSeconds / 3600)).Average().ToString("0.##") h</b>
        </div>
    }

    <div class="mx-auto mt-2">
        <div class="d-flex flex-row mx-2 gap-2">
            <p class="m-0">Evaluations</p>
            @if (Model.Evaluations != null) 
            {
                <b class="m-0 ms-auto text-primary">@Model.Evaluations.Select(e => e.Note).Average().ToString("0.##")</b>
            }
        </div>

        <div class="d-flex flex-row my-2 gap-2">
            <input type="text" placeholder="Nom"/>
            <input type="range" min="0" max="20" step="0.5" value="10" oninput="this.nextElementSibling.value = Number(this.value).toFixed(2)"/>
            <output>10.00</output>
            <input class="ms-auto" type="submit" value="Envoyer !"/>
        </div>
        <div class="border border-dark rounded-2 m-0">
            @if (Model.Evaluations != null)
            {
                foreach (EvaluationVM eval in Model.Evaluations)
                {
                    <div class="d-flex flex-row border-bottom border-primary mt-1 m-2 p-1">
                        <div>
                            <p class="m-0">@eval.NomEvaluateur</p>
                            <p class="m-0" style="font-size:smaller">@eval.Date.ToString("dd/MM/yyyy")</p>
                        </div>
                        <p class="m-0 ms-auto">@eval.Note.ToString("0.##")</p>
                    </div>
                }
            }
            else
            {
                <div class="container-fluid p-0 overflow-scroll">
                    <div class="position-sticky start-0 end-0 top-0 bottom-50 mt-5">
                        <p class="fs-1 text-center rainbow-text text-wrap w-50 mx-auto my-0">Il n'y a rien à voir ici...</p>
                    </div>
                    <img class="w-auto" src="~/Content/david_goodenough.png" alt="c pt"/>
                </div>
            }
        </div>
    </div>
</div>
